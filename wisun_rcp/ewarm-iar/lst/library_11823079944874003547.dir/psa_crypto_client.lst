###############################################################################
#
# IAR ANSI C/C++ Compiler V9.50.2.385/W64 for ARM         27/Nov/2024  12:17:31
# Copyright 1999-2024 IAR Systems AB.
#
#    Cpu mode                     =  thumb
#    Endian                       =  little
#    Source file                  =
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\library\psa_crypto_client.c
#    Command line                 =
#        -f
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\obj\library_11823079944874003547.dir\psa_crypto_client.o.rsp
#        (C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\library\psa_crypto_client.c
#        -D EFR32FG28B322F1024IM48=1 -D
#        configNUM_SDK_THREAD_LOCAL_STORAGE_POINTERS=2 -D
#        SL_COMPONENT_CATALOG_PRESENT=1 -D
#        MBEDTLS_CONFIG_FILE=<sl_mbedtls_config.h> -D
#        MBEDTLS_PSA_CRYPTO_CONFIG_FILE=<psa_crypto_config.h> -D
#        SL_RAIL_LIB_MULTIPROTOCOL_SUPPORT=0 -D
#        SL_RAIL_UTIL_PA_CONFIG_HEADER=<sl_rail_util_pa_config.h> -D
#        RTT_USE_ASM=0 -D MBED_CONF_MBED_TRACE_ENABLE=1 -D
#        MBED_CONF_NANOSTACK_CONFIGURATION=ws_router -D
#        MBED_TRACE_MAX_LEVEL=TRACE_ACTIVE_LEVEL_ALL -D DEBUG_EFM_USER=1 -D
#        HAVE_LFN=1 -D HAVE_LFN_PARENT=1 -lC
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\lst\library_11823079944874003547.dir
#        --diag_suppress Pa050 -o
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\obj\library_11823079944874003547.dir
#        --debug --endian=little --cpu=Cortex-M33 --cmse --cmse -e
#        --fpu=VFPv5_sp --dlib_config "C:\Program Files\IAR Systems\Embedded
#        Workbench 9.2\arm\inc\c\DLib_Config_Normal.h" -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\library\
#        -I C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\autogen\ -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\config\ -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\config\rail\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\Device\SiliconLabs\EFR32FG28\Include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\common\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\CMSIS\Core\Include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\CMSIS\RTOS2\Include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\service\device_init\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\emdrv\dmadrv\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\emdrv\common\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\emlib\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\freertos\cmsis\Include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\freertos\kernel\include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\freertos\kernel\portable\IAR\ARM_CM33_NTZ\non_secure\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\service\iostream\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\sl_mbedtls_support\config\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\sl_mbedtls_support\config\preset\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\sl_mbedtls_support\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\include\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\library\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\emdrv\nvm3\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\peripheral\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\sl_psa_driver\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\common\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\protocol\ble\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\protocol\ieee802154\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\protocol\wmbus\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\protocol\zwave\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\chip\efr32\efr32xg2x\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\protocol\sidewalk\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\plugin\pa-conversions\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\plugin\pa-conversions\efr32xg28\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\radio\rail_lib\plugin\rail_util_pti\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\se_manager\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\security\sl_component\se_manager\src\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\segger\systemview\SEGGER\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\silicon_labs\silabs_core\memory_manager\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\common\toolchain\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\service\system\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\app\wisun\component\ns_list\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\app\wisun\component\trace_util\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\app\wisun\component\trace_util\nanostack\nanostack-libservice\mbed-client-libservice\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\platform\service\sleeptimer\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\protocol\wisun\stack\inc\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\protocol\wisun\app\wisun_rcp\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\protocol\wisun\stack\inc\socket\
#        -I
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\protocol\wisun\stack\src\
#        -Ohz --use_c++_inline) --dependencies=n
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\obj\library_11823079944874003547.dir\psa_crypto_client.o.iar_deps
#    Locale                       =  C
#    List file                    =
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\lst\library_11823079944874003547.dir\psa_crypto_client.lst
#    Object file                  =
#        C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\ewarm-iar\obj\library_11823079944874003547.dir\psa_crypto_client.o
#    Runtime model:                  
#      __CPP_Runtime              =  1
#      __SystemLibrary            =  DLib
#      __dlib_file_descriptor     =  0
#      __dlib_full_locale_support =  0
#      __dlib_version             =  6
#
###############################################################################

C:\Users\DELL\SimplicityStudio\v5_workspace\wisun_rcp_7\gecko_sdk_4.4.3\util\third_party\mbedtls\library\psa_crypto_client.c
      1          /*
      2           *  PSA crypto client code
      3           */
      4          /*
      5           *  Copyright The Mbed TLS Contributors
      6           *  SPDX-License-Identifier: Apache-2.0
      7           *
      8           *  Licensed under the Apache License, Version 2.0 (the "License"); you may
      9           *  not use this file except in compliance with the License.
     10           *  You may obtain a copy of the License at
     11           *
     12           *  http://www.apache.org/licenses/LICENSE-2.0
     13           *
     14           *  Unless required by applicable law or agreed to in writing, software
     15           *  distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
     16           *  WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     17           *  See the License for the specific language governing permissions and
     18           *  limitations under the License.
     19           */
     20          
     21          #include "common.h"
     22          #include "psa/crypto.h"
     23          
     24          #if defined(MBEDTLS_PSA_CRYPTO_CLIENT)
     25          
     26          #include <string.h>
     27          #include "mbedtls/platform.h"
     28          

   \                                 In section .text, align 2, keep-with-next
     29          void psa_reset_key_attributes(psa_key_attributes_t *attributes)
     30          {
   \                     psa_reset_key_attributes: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
   \        0x2   0x4604             MOV      R4,R0
     31              mbedtls_free(attributes->domain_parameters);
   \        0x4   0x69E0             LDR      R0,[R4, #+28]
   \        0x6   0x.... 0x....      BL       sl_free
     32              memset(attributes, 0, sizeof(*attributes));
   \        0xA   0x4620             MOV      R0,R4
   \        0xC   0x2124             MOVS     R1,#+36
   \        0xE   0xE8BD 0x4010      POP      {R4,LR}
   \       0x12   0x.... 0x....      B.W      __aeabi_memclr4
     33          }
     34          

   \                                 In section .text, align 2, keep-with-next
     35          psa_status_t psa_set_key_domain_parameters(psa_key_attributes_t *attributes,
     36                                                     psa_key_type_t type,
     37                                                     const uint8_t *data,
     38                                                     size_t data_length)
     39          {
   \                     psa_set_key_domain_parameters: (+1)
   \        0x0   0xE92D 0x41F0      PUSH     {R4-R8,LR}
   \        0x4   0x4606             MOV      R6,R0
   \        0x6   0x460F             MOV      R7,R1
   \        0x8   0x4690             MOV      R8,R2
   \        0xA   0x461C             MOV      R4,R3
     40              uint8_t *copy = NULL;
   \        0xC   0x2500             MOVS     R5,#+0
     41          
     42              if (data_length != 0) {
   \        0xE   0xB164             CBZ.N    R4,??psa_set_key_domain_parameters_0
     43                  copy = mbedtls_calloc(1, data_length);
   \       0x10   0x4621             MOV      R1,R4
   \       0x12   0x2001             MOVS     R0,#+1
   \       0x14   0x.... 0x....      BL       sl_calloc
   \       0x18   0x0005             MOVS     R5,R0
     44                  if (copy == NULL) {
   \       0x1A   0xBF08             IT       EQ
   \       0x1C   0xF06F 0x008C      MVNEQ    R0,#+140
     45                      return PSA_ERROR_INSUFFICIENT_MEMORY;
   \       0x20   0xD00E             BEQ.N    ??psa_set_key_domain_parameters_1
     46                  }
     47                  memcpy(copy, data, data_length);
   \       0x22   0x4622             MOV      R2,R4
   \       0x24   0x4641             MOV      R1,R8
   \       0x26   0x.... 0x....      BL       __aeabi_memcpy
     48              }
     49              /* After this point, this function is guaranteed to succeed, so it
     50               * can start modifying `*attributes`. */
     51          
     52              if (attributes->domain_parameters != NULL) {
   \                     ??psa_set_key_domain_parameters_0: (+1)
   \       0x2A   0x69F0             LDR      R0,[R6, #+28]
   \       0x2C   0xB120             CBZ.N    R0,??psa_set_key_domain_parameters_2
     53                  mbedtls_free(attributes->domain_parameters);
   \       0x2E   0x.... 0x....      BL       sl_free
     54                  attributes->domain_parameters = NULL;
   \       0x32   0x2100             MOVS     R1,#+0
   \       0x34   0x61F1             STR      R1,[R6, #+28]
     55                  attributes->domain_parameters_size = 0;
   \       0x36   0x6231             STR      R1,[R6, #+32]
     56              }
     57          
     58              attributes->domain_parameters = copy;
   \                     ??psa_set_key_domain_parameters_2: (+1)
   \       0x38   0x61F5             STR      R5,[R6, #+28]
     59              attributes->domain_parameters_size = data_length;
   \       0x3A   0x6234             STR      R4,[R6, #+32]
     60              attributes->core.type = type;
   \       0x3C   0x8037             STRH     R7,[R6, #+0]
     61              return PSA_SUCCESS;
   \       0x3E   0x2000             MOVS     R0,#+0
   \                     ??psa_set_key_domain_parameters_1: (+1)
   \       0x40   0xE8BD 0x81F0      POP      {R4-R8,PC}
     62          }
     63          

   \                                 In section .text, align 2, keep-with-next
     64          psa_status_t psa_get_key_domain_parameters(
     65              const psa_key_attributes_t *attributes,
     66              uint8_t *data, size_t data_size, size_t *data_length)
     67          {
   \                     psa_get_key_domain_parameters: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
   \        0x2   0x460C             MOV      R4,R1
     68              if (attributes->domain_parameters_size > data_size) {
   \        0x4   0x6A01             LDR      R1,[R0, #+32]
   \        0x6   0x428A             CMP      R2,R1
   \        0x8   0xD202             BCS.N    ??psa_get_key_domain_parameters_0
     69                  return PSA_ERROR_BUFFER_TOO_SMALL;
   \        0xA   0xF06F 0x0089      MVN      R0,#+137
   \        0xE   0xBD10             POP      {R4,PC}
     70              }
     71              *data_length = attributes->domain_parameters_size;
   \                     ??psa_get_key_domain_parameters_0: (+1)
   \       0x10   0x6019             STR      R1,[R3, #+0]
     72              if (attributes->domain_parameters_size != 0) {
   \       0x12   0x6A02             LDR      R2,[R0, #+32]
   \       0x14   0xB11A             CBZ.N    R2,??psa_get_key_domain_parameters_1
     73                  memcpy(data, attributes->domain_parameters,
     74                         attributes->domain_parameters_size);
   \       0x16   0x69C1             LDR      R1,[R0, #+28]
   \       0x18   0x4620             MOV      R0,R4
   \       0x1A   0x.... 0x....      BL       __aeabi_memcpy
     75              }
     76              return PSA_SUCCESS;
   \                     ??psa_get_key_domain_parameters_1: (+1)
   \       0x1E   0x2000             MOVS     R0,#+0
   \       0x20   0xBD10             POP      {R4,PC}
     77          }
     78          
     79          #endif /* MBEDTLS_PSA_CRYPTO_CLIENT */

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   psa_get_key_domain_parameters
         8   -> __aeabi_memcpy
       8   psa_reset_key_attributes
         0   -> __aeabi_memclr4
         8   -> sl_free
      24   psa_set_key_domain_parameters
        24   -> __aeabi_memcpy
        24   -> sl_calloc
        24   -> sl_free


   Section sizes:

   Bytes  Function/Label
   -----  --------------
      34  psa_get_key_domain_parameters
      22  psa_reset_key_attributes
      68  psa_set_key_domain_parameters

 
 124 bytes in section .text
 
 124 bytes of CODE memory

Errors: none
Warnings: none
