###############################################################################
#
# IAR ANSI C/C++ Compiler V9.50.2.385/W64 for ARM         29/Mar/2025  15:53:00
# Copyright 1999-2024 IAR Systems AB.
#
#    Cpu mode          =  thumb
#    Endian            =  little
#    Source file       =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\os_prio.c
#    Command line      =
#        -f "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\source_1437350445724322328.dir\os_prio.o.rsp"
#        ("D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\os_prio.c"
#        -D DEBUG_EFM=1 -D EFR32FG28B322F1024IM48=1 -D
#        configNUM_SDK_THREAD_LOCAL_STORAGE_POINTERS=2 -D
#        SL_COMPONENT_CATALOG_PRESENT=1 -D
#        MBEDTLS_CONFIG_FILE=<sl_mbedtls_config.h> -D
#        MBEDTLS_PSA_CRYPTO_CONFIG_FILE=<psa_crypto_config.h> -D
#        SL_RAIL_LIB_MULTIPROTOCOL_SUPPORT=0 -D
#        SL_RAIL_UTIL_PA_CONFIG_HEADER=<sl_rail_util_pa_config.h> -D
#        RTT_USE_ASM=0 -lC "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\source_1437350445724322328.dir"
#        --diag_suppress Pa050 -o "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\source_1437350445724322328.dir"
#        --no_cse --no_unroll --no_inline --no_code_motion --no_tbaa
#        --no_clustering --no_scheduling --debug --endian=little
#        --cpu=Cortex-M33 --cmse --cmse -e --fpu=VFPv5_sp --dlib_config
#        "C:\Program Files\IAR Systems\Embedded Workbench
#        9.2\arm\inc\c\DLib_Config_Normal.h" -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\rail\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\wisun\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\.\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\Device\SiliconLabs\EFR32FG28\Include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_project_info\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\src\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\Core\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\RTOS2\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\device_init\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emlib\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\preset\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\library\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\cpu\include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\ports\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\nvm3\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\peripheral\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_psa_driver\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\common\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ble\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ieee802154\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\wmbus\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\zwave\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\chip\efr32\efr32xg2x\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\sidewalk\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\efr32xg28\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\rail_util_pti\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\src\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\segger\systemview\SEGGER\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\silicon_labs\silabs_core\memory_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\toolchain\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\system\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_core\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_setting\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\cli_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\event_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ns_list\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ping\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\nanostack\nanostack-libservice\mbed-client-libservice\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\udp_client\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\sleeptimer\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\plugin\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\socket\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\autogen\\" -On
#        --use_c++_inline) --dependencies=n "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\source_1437350445724322328.dir\os_prio.o.iar_deps"
#    Locale            =  C
#    List file         =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\source_1437350445724322328.dir\os_prio.lst
#    Object file       =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\source_1437350445724322328.dir\os_prio.o
#    Runtime model:       
#      __CPP_Runtime   =  1
#      __SystemLibrary =  DLib
#      __dlib_version  =  6
#
###############################################################################

D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\os_prio.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief Kernel - Priority Management
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2018 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * The licensor of this software is Silicon Laboratories Inc.  Your use of this
     10           * software is governed by the terms of Silicon Labs Master Software License
     11           * Agreement (MSLA) available at
     12           * www.silabs.com/about-us/legal/master-software-license-agreement.  This
     13           * software is distributed to you in Source Code format and is governed by the
     14           * sections of the MSLA applicable to Source Code.
     15           *
     16           ******************************************************************************/
     17          
     18          /********************************************************************************************************
     19           ********************************************************************************************************
     20           *                                       DEPENDENCIES & AVAIL CHECK(S)
     21           ********************************************************************************************************
     22           *******************************************************************************************************/
     23          
     24          #include  <rtos_description.h>
     25          
     26          #if (defined(RTOS_MODULE_KERNEL_AVAIL))
     27          
     28          /********************************************************************************************************
     29           ********************************************************************************************************
     30           *                                               INCLUDE FILES
     31           ********************************************************************************************************
     32           *******************************************************************************************************/
     33          
     34          #define  MICRIUM_SOURCE
     35          #include "../include/os.h"
     36          #include "os_priv.h"
     37          
     38          #ifdef VSC_INCLUDE_SOURCE_FILE_NAMES
     39          const CPU_CHAR *os_prio__c = "$Id: $";
     40          #endif
     41          
     42          /********************************************************************************************************
     43           ********************************************************************************************************
     44           *                                           GLOBAL VARIABLES
     45           ********************************************************************************************************
     46           *******************************************************************************************************/
     47          

   \                                 In section .bss, align 4
     48          CPU_DATA OSPrioTbl[OS_PRIO_TBL_SIZE];                           // Declare the array local to this file to allow for...
   \                     OSPrioTbl:
   \        0x0                      DS8 8
     49                                                                          // ... optimization. This allows the table to be    ...
     50                                                                          // ... located in fast memory.
     51          
     52          /********************************************************************************************************
     53           ********************************************************************************************************
     54           *                                           INTERNAL FUNCTIONS
     55           ********************************************************************************************************
     56           *******************************************************************************************************/
     57          
     58          /****************************************************************************************************//**
     59           *                                               OS_PrioInit()
     60           *
     61           * @brief    This function is called by the Kernel to initialize the list of ready priorities.
     62           *
     63           * @note     (1) This function is INTERNAL to the Kernel and your application MUST NOT call it.
     64           *******************************************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     65          void OS_PrioInit(void)
     66          {
     67            CPU_DATA i;
     68          
     69            //                                                               Clear the bitmap table ... no task is ready.
     70            for (i = 0u; i < OS_PRIO_TBL_SIZE; i++) {
   \                     OS_PrioInit: (+1)
   \        0x0   0x2200             MOVS     R2,#+0
   \                     ??OS_PrioInit_0: (+1)
   \        0x2   0x2A02             CMP      R2,#+2
   \        0x4   0xD205             BCS.N    ??OS_PrioInit_1
     71              OSPrioTbl[i] = 0u;
   \        0x6   0x2000             MOVS     R0,#+0
   \        0x8   0x....             LDR.N    R1,??DataTable3
   \        0xA   0xF841 0x0022      STR      R0,[R1, R2, LSL #+2]
     72            }
   \        0xE   0x1C52             ADDS     R2,R2,#+1
   \       0x10   0xE7F7             B.N      ??OS_PrioInit_0
     73          }
   \                     ??OS_PrioInit_1: (+1)
   \       0x12   0x4770             BX       LR
     74          
     75          /****************************************************************************************************//**
     76           *                                           OS_PrioGetHighest()
     77           *
     78           * @brief    This function is called by other Kernel services to determine the highest priority task
     79           *           waiting on the event.
     80           *
     81           * @return   The priority of the Highest Priority Task (HPT) waiting for the event.
     82           *
     83           * @note     (1) This function is INTERNAL to the Kernel and your application MUST NOT call it.
     84           *******************************************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     85          OS_PRIO OS_PrioGetHighest(void)
     86          {
   \                     OS_PrioGetHighest: (+1)
   \        0x0   0xB580             PUSH     {R7,LR}
     87          #if   (OS_CFG_PRIO_MAX == 8)                                    // Optimize for less than word size nbr of priorities.
     88            return ((OS_PRIO)CPU_CntLeadZeros08((CPU_INT08U)(OSPrioTbl[0] >> 24u)));
     89          #elif (OS_CFG_PRIO_MAX == 16)                                   // Optimize for less than word size nbr of priorities.
     90            return ((OS_PRIO)CPU_CntLeadZeros16((CPU_INT16U)(OSPrioTbl[0] >> 16u)));
     91          #elif (OS_CFG_PRIO_MAX <= DEF_INT_CPU_NBR_BITS)                 // Optimize for less than word size nbr of priorities.
     92            return ((OS_PRIO)CPU_CntLeadZeros(OSPrioTbl[0]));
     93          #elif (OS_CFG_PRIO_MAX <= (2 * DEF_INT_CPU_NBR_BITS))           // Optimize for    2x the word size nbr of priorities.
     94            if (OSPrioTbl[0] == 0u) {
   \        0x2   0x....             LDR.N    R1,??DataTable3
   \        0x4   0x6808             LDR      R0,[R1, #+0]
   \        0x6   0x2800             CMP      R0,#+0
   \        0x8   0xD105             BNE.N    ??OS_PrioGetHighest_0
     95              return ((OS_PRIO)CPU_CntLeadZeros(OSPrioTbl[1]) + DEF_INT_CPU_NBR_BITS);
   \        0xA   0x6848             LDR      R0,[R1, #+4]
   \        0xC   0x.... 0x....      BL       CPU_CntLeadZeros
   \       0x10   0x3020             ADDS     R0,R0,#+32
   \       0x12   0xB2C0             UXTB     R0,R0
   \       0x14   0xE003             B.N      ??OS_PrioGetHighest_1
     96            } else {
     97              return ((OS_PRIO)CPU_CntLeadZeros(OSPrioTbl[0]));
   \                     ??OS_PrioGetHighest_0: (+1)
   \       0x16   0x6808             LDR      R0,[R1, #+0]
   \       0x18   0x.... 0x....      BL       CPU_CntLeadZeros
   \       0x1C   0xB2C0             UXTB     R0,R0
   \                     ??OS_PrioGetHighest_1: (+1)
   \       0x1E   0xBD02             POP      {R1,PC}
     98            }
     99          #else
    100            uint32_t i    = 0u;
    101            OS_PRIO  prio = 0u;
    102          
    103            while (i < OS_PRIO_TBL_SIZE && OSPrioTbl[i] == 0u) {          // Search the bitmap table for the highest priority.
    104              prio += DEF_INT_CPU_NBR_BITS;                               // Compute the step of each CPU_DATA entry.
    105              i++;
    106            }
    107          
    108            if (i < OS_PRIO_TBL_SIZE) {
    109              prio += (OS_PRIO)CPU_CntLeadZeros(OSPrioTbl[i]);            // Find the position of the first bit set at the entry.
    110            }
    111          
    112            return (prio);
    113          #endif
    114          }
    115          
    116          /****************************************************************************************************//**
    117           *                                               OS_PrioInsert()
    118           *
    119           * @brief    This function is called to insert a priority in the priority table.
    120           *
    121           * @param    prio    The priority to insert.
    122           *
    123           * @note     (1) This function is INTERNAL to the Kernel and your application MUST NOT call it.
    124           *******************************************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    125          void OS_PrioInsert(OS_PRIO prio)
    126          {
   \                     OS_PrioInsert: (+1)
   \        0x0   0xB410             PUSH     {R4}
    127          #if   (OS_CFG_PRIO_MAX <= DEF_INT_CPU_NBR_BITS)                 // Optimize for less than word size nbr of priorities.
    128            OSPrioTbl[0] |= 1u << ((DEF_INT_CPU_NBR_BITS - 1u) - prio);
    129          
    130          #elif (OS_CFG_PRIO_MAX <= (2 * DEF_INT_CPU_NBR_BITS))           // Optimize for    2x the word size nbr of priorities.
    131            if (prio < DEF_INT_CPU_NBR_BITS) {
   \        0x2   0x0001             MOVS     R1,R0
   \        0x4   0xB2C9             UXTB     R1,R1
   \        0x6   0x2920             CMP      R1,#+32
   \        0x8   0xD208             BCS.N    ??OS_PrioInsert_0
    132              OSPrioTbl[0] |= 1u << ((DEF_INT_CPU_NBR_BITS - 1u) - prio);
   \        0xA   0x....             LDR.N    R4,??DataTable3
   \        0xC   0x6822             LDR      R2,[R4, #+0]
   \        0xE   0x2301             MOVS     R3,#+1
   \       0x10   0xF1D0 0x011F      RSBS     R1,R0,#+31
   \       0x14   0x408B             LSLS     R3,R3,R1
   \       0x16   0x431A             ORRS     R2,R3,R2
   \       0x18   0x6022             STR      R2,[R4, #+0]
   \       0x1A   0xE007             B.N      ??OS_PrioInsert_1
    133            } else {
    134              OSPrioTbl[1] |= 1u << ((DEF_INT_CPU_NBR_BITS - 1u) - (prio - DEF_INT_CPU_NBR_BITS));
   \                     ??OS_PrioInsert_0: (+1)
   \       0x1C   0x....             LDR.N    R4,??DataTable3
   \       0x1E   0x6862             LDR      R2,[R4, #+4]
   \       0x20   0x2301             MOVS     R3,#+1
   \       0x22   0xF1D0 0x013F      RSBS     R1,R0,#+63
   \       0x26   0x408B             LSLS     R3,R3,R1
   \       0x28   0x431A             ORRS     R2,R3,R2
   \       0x2A   0x6062             STR      R2,[R4, #+4]
    135            }
    136          
    137          #else
    138            CPU_DATA bit_nbr;
    139            OS_PRIO  ix;
    140          
    141            ix = prio / DEF_INT_CPU_NBR_BITS;
    142            bit_nbr = (CPU_DATA) prio & (DEF_INT_CPU_NBR_BITS - 1u);
    143            OSPrioTbl[ix] |= 1u << ((DEF_INT_CPU_NBR_BITS - 1u) - bit_nbr);
    144          #endif
    145          }
   \                     ??OS_PrioInsert_1: (+1)
   \       0x2C   0xBC10             POP      {R4}
   \       0x2E   0x4770             BX       LR
    146          
    147          /****************************************************************************************************//**
    148           *                                               OS_PrioRemove()
    149           *
    150           * @brief    This function is called to remove a priority in the priority table.
    151           *
    152           * @param    prio    The priority to remove.
    153           *
    154           * @note     (1) This function is INTERNAL to the Kernel and your application MUST NOT call it.
    155           *******************************************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    156          void OS_PrioRemove(OS_PRIO prio)
    157          {
   \                     OS_PrioRemove: (+1)
   \        0x0   0xB410             PUSH     {R4}
    158          #if   (OS_CFG_PRIO_MAX <= DEF_INT_CPU_NBR_BITS)                 // Optimize for less than word size nbr of priorities.
    159            OSPrioTbl[0] &= ~(1u << ((DEF_INT_CPU_NBR_BITS - 1u) - prio));
    160          
    161          #elif (OS_CFG_PRIO_MAX <= (2 * DEF_INT_CPU_NBR_BITS))           // Optimize for    2x the word size nbr of priorities.
    162            if (prio < DEF_INT_CPU_NBR_BITS) {
   \        0x2   0x0001             MOVS     R1,R0
   \        0x4   0xB2C9             UXTB     R1,R1
   \        0x6   0x2920             CMP      R1,#+32
   \        0x8   0xD208             BCS.N    ??OS_PrioRemove_0
    163              OSPrioTbl[0] &= ~(1u << ((DEF_INT_CPU_NBR_BITS - 1u) - prio));
   \        0xA   0x....             LDR.N    R4,??DataTable3
   \        0xC   0x6822             LDR      R2,[R4, #+0]
   \        0xE   0x2301             MOVS     R3,#+1
   \       0x10   0xF1D0 0x011F      RSBS     R1,R0,#+31
   \       0x14   0x408B             LSLS     R3,R3,R1
   \       0x16   0x439A             BICS     R2,R2,R3
   \       0x18   0x6022             STR      R2,[R4, #+0]
   \       0x1A   0xE007             B.N      ??OS_PrioRemove_1
    164            } else {
    165              OSPrioTbl[1] &= ~(1u << ((DEF_INT_CPU_NBR_BITS - 1u) - (prio - DEF_INT_CPU_NBR_BITS)));
   \                     ??OS_PrioRemove_0: (+1)
   \       0x1C   0x....             LDR.N    R4,??DataTable3
   \       0x1E   0x6862             LDR      R2,[R4, #+4]
   \       0x20   0x2301             MOVS     R3,#+1
   \       0x22   0xF1D0 0x013F      RSBS     R1,R0,#+63
   \       0x26   0x408B             LSLS     R3,R3,R1
   \       0x28   0x439A             BICS     R2,R2,R3
   \       0x2A   0x6062             STR      R2,[R4, #+4]
    166            }
    167          
    168          #else
    169            CPU_DATA bit_nbr;
    170            OS_PRIO  ix;
    171          
    172            ix = prio / DEF_INT_CPU_NBR_BITS;
    173            bit_nbr = (CPU_DATA) prio & (DEF_INT_CPU_NBR_BITS - 1u);
    174            OSPrioTbl[ix] &= ~(1u << ((DEF_INT_CPU_NBR_BITS - 1u) - bit_nbr));
    175          #endif
    176          }
   \                     ??OS_PrioRemove_1: (+1)
   \       0x2C   0xBC10             POP      {R4}
   \       0x2E   0x4770             BX       LR

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \        0x0   0x....'....        DC32     OSPrioTbl
    177          
    178          /********************************************************************************************************
    179           ********************************************************************************************************
    180           *                                   DEPENDENCIES & AVAIL CHECK(S) END
    181           ********************************************************************************************************
    182           *******************************************************************************************************/
    183          
    184          #endif // (defined(RTOS_MODULE_KERNEL_AVAIL))

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       8   OS_PrioGetHighest
         8   -> CPU_CntLeadZeros
       0   OS_PrioInit
       4   OS_PrioInsert
       4   OS_PrioRemove


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       8  OSPrioTbl
      32  OS_PrioGetHighest
      20  OS_PrioInit
      48  OS_PrioInsert
      48  OS_PrioRemove

 
   8 bytes in section .bss
 152 bytes in section .text
 
 152 bytes of CODE memory
   8 bytes of DATA memory

Errors: none
Warnings: none
