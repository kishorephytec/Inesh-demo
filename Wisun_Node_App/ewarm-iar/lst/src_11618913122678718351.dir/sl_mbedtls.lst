###############################################################################
#
# IAR ANSI C/C++ Compiler V9.50.2.385/W64 for ARM         29/Mar/2025  15:53:04
# Copyright 1999-2024 IAR Systems AB.
#
#    Cpu mode                     =  thumb
#    Endian                       =  little
#    Source file                  =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\src\sl_mbedtls.c
#    Command line                 =
#        -f "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_11618913122678718351.dir\sl_mbedtls.o.rsp"
#        ("D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\src\sl_mbedtls.c"
#        -D DEBUG_EFM=1 -D EFR32FG28B322F1024IM48=1 -D
#        configNUM_SDK_THREAD_LOCAL_STORAGE_POINTERS=2 -D
#        SL_COMPONENT_CATALOG_PRESENT=1 -D
#        MBEDTLS_CONFIG_FILE=<sl_mbedtls_config.h> -D
#        MBEDTLS_PSA_CRYPTO_CONFIG_FILE=<psa_crypto_config.h> -D
#        SL_RAIL_LIB_MULTIPROTOCOL_SUPPORT=0 -D
#        SL_RAIL_UTIL_PA_CONFIG_HEADER=<sl_rail_util_pa_config.h> -D
#        RTT_USE_ASM=0 -lC "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\src_11618913122678718351.dir"
#        --diag_suppress Pa050 -o "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_11618913122678718351.dir" --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=Cortex-M33 --cmse --cmse
#        -e --fpu=VFPv5_sp --dlib_config "C:\Program Files\IAR Systems\Embedded
#        Workbench 9.2\arm\inc\c\DLib_Config_Normal.h" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\src\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\rail\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\wisun\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\.\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\Device\SiliconLabs\EFR32FG28\Include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_project_info\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\src\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\Core\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\RTOS2\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\device_init\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emlib\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\preset\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\library\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\cpu\include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\ports\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\nvm3\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\peripheral\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_psa_driver\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\common\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ble\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ieee802154\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\wmbus\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\zwave\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\chip\efr32\efr32xg2x\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\sidewalk\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\efr32xg28\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\rail_util_pti\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\src\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\segger\systemview\SEGGER\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\silicon_labs\silabs_core\memory_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\toolchain\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\system\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_core\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_setting\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\cli_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\event_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ns_list\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ping\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\nanostack\nanostack-libservice\mbed-client-libservice\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\udp_client\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\sleeptimer\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\plugin\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\socket\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\autogen\\" -On
#        --use_c++_inline) --dependencies=n "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_11618913122678718351.dir\sl_mbedtls.o.iar_deps"
#    Locale                       =  C
#    List file                    =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\src_11618913122678718351.dir\sl_mbedtls.lst
#    Object file                  =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_11618913122678718351.dir\sl_mbedtls.o
#    Runtime model:                  
#      __CPP_Runtime              =  1
#      __SystemLibrary            =  DLib
#      __dlib_full_locale_support =  0
#      __dlib_version             =  6
#
###############################################################################

D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\src\sl_mbedtls.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief Initialize the Silicon Labs platform integration of mbedTLS.
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2020 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * SPDX-License-Identifier: Zlib
     10           *
     11           * The licensor of this software is Silicon Laboratories Inc.
     12           *
     13           * This software is provided 'as-is', without any express or implied
     14           * warranty. In no event will the authors be held liable for any damages
     15           * arising from the use of this software.
     16           *
     17           * Permission is granted to anyone to use this software for any purpose,
     18           * including commercial applications, and to alter it and redistribute it
     19           * freely, subject to the following restrictions:
     20           *
     21           * 1. The origin of this software must not be misrepresented; you must not
     22           *    claim that you wrote the original software. If you use this software
     23           *    in a product, an acknowledgment in the product documentation would be
     24           *    appreciated but is not required.
     25           * 2. Altered source versions must be plainly marked as such, and must not be
     26           *    misrepresented as being the original software.
     27           * 3. This notice may not be removed or altered from any source distribution.
     28           *
     29           ******************************************************************************/
     30          #include "sl_mbedtls.h"
     31          #include "sl_assert.h"
     32          #include "mbedtls/build_info.h"
     33          #if !defined(SL_TRUSTZONE_NONSECURE)
     34          #if defined(SEMAILBOX_PRESENT) || defined(CRYPTOACC_PRESENT)
     35          #include "sl_se_manager.h"
     36          #endif
     37          #if defined(CRYPTOACC_PRESENT) && (_SILICON_LABS_32B_SERIES_2_CONFIG > 2)
     38            #include "cryptoacc_management.h"
     39          #endif
     40          #endif // #if !defined(SL_TRUSTZONE_NONSECURE)
     41          
     42          #if defined(MBEDTLS_THREADING_ALT) && defined(MBEDTLS_THREADING_C)
     43          #include "mbedtls/threading.h"

   \                                 In section .text, align 2, keep-with-next
   \   static __vfp void THREADING_InitMutex(mbedtls_threading_mutex_t *)
   \                     THREADING_InitMutex: (+1)
   \        0x0   0xB510             PUSH     {R4,LR}
   \        0x2   0x0004             MOVS     R4,R0
   \        0x4   0x2C00             CMP      R4,#+0
   \        0x6   0xD00A             BEQ.N    ??THREADING_InitMutex_0
   \                     ??THREADING_InitMutex_1: (+1)
   \        0x8   0x0020             MOVS     R0,R4
   \        0xA   0x.... 0x....      BL       osMutexNew
   \        0xE   0x6120             STR      R0,[R4, #+16]
   \       0x10   0x6920             LDR      R0,[R4, #+16]
   \       0x12   0x2800             CMP      R0,#+0
   \       0x14   0xD103             BNE.N    ??THREADING_InitMutex_2
   \       0x16   0x2184             MOVS     R1,#+132
   \       0x18   0x....             LDR.N    R0,??DataTable3
   \       0x1A   0x.... 0x....      BL       assertEFM
   \                     ??THREADING_InitMutex_2: (+1)
   \                     ??THREADING_InitMutex_0: (+1)
   \       0x1E   0xBD10             POP      {R4,PC}

   \                                 In section .text, align 2, keep-with-next
   \   static __vfp void THREADING_FreeMutex(mbedtls_threading_mutex_t *)
   \                     THREADING_FreeMutex: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
   \        0x4   0x2D00             CMP      R5,#+0
   \        0x6   0xD009             BEQ.N    ??THREADING_FreeMutex_0
   \                     ??THREADING_FreeMutex_1: (+1)
   \        0x8   0x6928             LDR      R0,[R5, #+16]
   \        0xA   0x.... 0x....      BL       osMutexDelete
   \        0xE   0x0004             MOVS     R4,R0
   \       0x10   0x2C00             CMP      R4,#+0
   \       0x12   0xD003             BEQ.N    ??THREADING_FreeMutex_2
   \       0x14   0x2193             MOVS     R1,#+147
   \       0x16   0x....             LDR.N    R0,??DataTable3
   \       0x18   0x.... 0x....      BL       assertEFM
   \                     ??THREADING_FreeMutex_2: (+1)
   \                     ??THREADING_FreeMutex_0: (+1)
   \       0x1C   0xBD31             POP      {R0,R4,R5,PC}

   \                                 In section .text, align 2, keep-with-next
   \   static __vfp int THREADING_TakeMutexBlocking(mbedtls_threading_mutex_t *)
   \                     THREADING_TakeMutexBlocking: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
   \        0x4   0x2D00             CMP      R5,#+0
   \        0x6   0xD102             BNE.N    ??THREADING_TakeMutexBlocking_0
   \        0x8   0xF07F 0x001B      MVNS     R0,#+27
   \        0xC   0xE010             B.N      ??THREADING_TakeMutexBlocking_1
   \                     ??THREADING_TakeMutexBlocking_0: (+1)
   \        0xE   0x2400             MOVS     R4,#+0
   \       0x10   0x.... 0x....      BL       osKernelGetState
   \       0x14   0x2802             CMP      R0,#+2
   \       0x16   0xD105             BNE.N    ??THREADING_TakeMutexBlocking_2
   \       0x18   0xF05F 0x31FF      MOVS     R1,#+4294967295
   \       0x1C   0x6928             LDR      R0,[R5, #+16]
   \       0x1E   0x.... 0x....      BL       osMutexAcquire
   \       0x22   0x0004             MOVS     R4,R0
   \                     ??THREADING_TakeMutexBlocking_2: (+1)
   \       0x24   0x2C00             CMP      R4,#+0
   \       0x26   0xD101             BNE.N    ??THREADING_TakeMutexBlocking_3
   \       0x28   0x2000             MOVS     R0,#+0
   \       0x2A   0xE001             B.N      ??THREADING_TakeMutexBlocking_4
   \                     ??THREADING_TakeMutexBlocking_3: (+1)
   \       0x2C   0xF07F 0x001D      MVNS     R0,#+29
   \                     ??THREADING_TakeMutexBlocking_4: (+1)
   \                     ??THREADING_TakeMutexBlocking_1: (+1)
   \       0x30   0xBD32             POP      {R1,R4,R5,PC}

   \                                 In section .text, align 2, keep-with-next
   \   static __vfp int THREADING_GiveMutex(mbedtls_threading_mutex_t *)
   \                     THREADING_GiveMutex: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
   \        0x4   0x2D00             CMP      R5,#+0
   \        0x6   0xD102             BNE.N    ??THREADING_GiveMutex_0
   \        0x8   0xF07F 0x001B      MVNS     R0,#+27
   \        0xC   0xE00E             B.N      ??THREADING_GiveMutex_1
   \                     ??THREADING_GiveMutex_0: (+1)
   \        0xE   0x2400             MOVS     R4,#+0
   \       0x10   0x.... 0x....      BL       osKernelGetState
   \       0x14   0x2802             CMP      R0,#+2
   \       0x16   0xD103             BNE.N    ??THREADING_GiveMutex_2
   \       0x18   0x6928             LDR      R0,[R5, #+16]
   \       0x1A   0x.... 0x....      BL       osMutexRelease
   \       0x1E   0x0004             MOVS     R4,R0
   \                     ??THREADING_GiveMutex_2: (+1)
   \       0x20   0x2C00             CMP      R4,#+0
   \       0x22   0xD101             BNE.N    ??THREADING_GiveMutex_3
   \       0x24   0x2000             MOVS     R0,#+0
   \       0x26   0xE001             B.N      ??THREADING_GiveMutex_4
   \                     ??THREADING_GiveMutex_3: (+1)
   \       0x28   0xF07F 0x001D      MVNS     R0,#+29
   \                     ??THREADING_GiveMutex_4: (+1)
   \                     ??THREADING_GiveMutex_1: (+1)
   \       0x2C   0xBD32             POP      {R1,R4,R5,PC}
     44          #if defined(MBEDTLS_PSA_CRYPTO_C)
     45          #include "cmsis_os2.h"
     46          #include <stdbool.h>

   \                                 In section .bss, align 1
     47          static volatile bool mbedtls_psa_slots_mutex_inited = false;
   \                     mbedtls_psa_slots_mutex_inited:
   \        0x0                      DS8 1
     48          
     49          /**
     50           * \brief          Lock all task switches
     51           *
     52           * \return         Previous lock state
     53           *
     54           */

   \                                 In section .text, align 2, keep-with-next
     55          static inline int32_t lock_task_switches(void)
     56          {
   \                     lock_task_switches: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
     57            int32_t kernel_lock_state = 0;
   \        0x2   0x2500             MOVS     R5,#+0
     58            osKernelState_t kernel_state = osKernelGetState();
   \        0x4   0x.... 0x....      BL       osKernelGetState
   \        0x8   0x0004             MOVS     R4,R0
     59            if (kernel_state != osKernelInactive && kernel_state != osKernelReady) {
   \        0xA   0x2C00             CMP      R4,#+0
   \        0xC   0xD004             BEQ.N    ??lock_task_switches_0
   \        0xE   0x2C01             CMP      R4,#+1
   \       0x10   0xD002             BEQ.N    ??lock_task_switches_0
     60              kernel_lock_state = osKernelLock();
   \       0x12   0x.... 0x....      BL       osKernelLock
   \       0x16   0x0005             MOVS     R5,R0
     61            }
     62            return kernel_lock_state;
   \                     ??lock_task_switches_0: (+1)
   \       0x18   0x0028             MOVS     R0,R5
   \       0x1A   0xBD32             POP      {R1,R4,R5,PC}
     63          }
     64          
     65          /**
     66           * \brief          Restores the previous lock state
     67           */

   \                                 In section .text, align 2, keep-with-next
     68          static inline void restore_lock_state(int32_t kernel_lock_state)
     69          {
   \                     restore_lock_state: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
     70            osKernelState_t kernel_state = osKernelGetState();
   \        0x4   0x.... 0x....      BL       osKernelGetState
   \        0x8   0x0004             MOVS     R4,R0
     71            if (kernel_state != osKernelInactive && kernel_state != osKernelReady) {
   \        0xA   0x2C00             CMP      R4,#+0
   \        0xC   0xD00A             BEQ.N    ??restore_lock_state_0
   \        0xE   0x2C01             CMP      R4,#+1
   \       0x10   0xD008             BEQ.N    ??restore_lock_state_0
     72              if (osKernelRestoreLock(kernel_lock_state) < 0) {
   \       0x12   0x0028             MOVS     R0,R5
   \       0x14   0x.... 0x....      BL       osKernelRestoreLock
   \       0x18   0x2800             CMP      R0,#+0
   \       0x1A   0xD503             BPL.N    ??restore_lock_state_0
     73                EFM_ASSERT(false);
   \       0x1C   0x2149             MOVS     R1,#+73
   \       0x1E   0x....             LDR.N    R0,??DataTable3_1
   \       0x20   0x.... 0x....      BL       assertEFM
     74              }
     75            }
     76          }
   \                     ??restore_lock_state_0: (+1)
   \       0x24   0xBD31             POP      {R0,R4,R5,PC}
     77          
     78          #endif // defined(MBEDTLS_PSA_CRYPTO_C)
     79          #endif // defined(MBEDTLS_THREADING_ALT) && defined(MBEDTLS_THREADING_C)
     80          

   \                                 In section .text, align 2, keep-with-next
     81          void sl_mbedtls_init(void)
     82          {
   \                     sl_mbedtls_init: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
     83          #if !defined(SL_TRUSTZONE_NONSECURE)
     84          
     85          #if defined(SEMAILBOX_PRESENT) || defined(CRYPTOACC_PRESENT)
     86            /* Initialize the SE Manager including the SE lock.
     87               No need for critical region here since sl_se_init implements one. */
     88            sl_status_t ret;
     89            ret = sl_se_init();
   \        0x2   0x.... 0x....      BL       sl_se_init
   \        0x6   0x0004             MOVS     R4,R0
     90            EFM_ASSERT(ret == SL_STATUS_OK);
   \        0x8   0x2C00             CMP      R4,#+0
   \        0xA   0xD003             BEQ.N    ??sl_mbedtls_init_0
   \        0xC   0x215A             MOVS     R1,#+90
   \        0xE   0x....             LDR.N    R0,??DataTable3_1
   \       0x10   0x.... 0x....      BL       assertEFM
     91          #endif
     92          
     93          #if defined(CRYPTOACC_PRESENT) && (_SILICON_LABS_32B_SERIES_2_CONFIG > 2)
     94            // Set up SCA countermeasures in hardware
     95            cryptoacc_initialize_countermeasures();
     96          #endif // SILICON_LABS_32B_SERIES_2_CONFIG > 2
     97          
     98          #endif // #if !defined(SL_TRUSTZONE_NONSECURE)
     99          
    100          #if defined(MBEDTLS_THREADING_ALT) && defined(MBEDTLS_THREADING_C)
    101            mbedtls_threading_set_alt(&THREADING_InitMutex,
    102                                      &THREADING_FreeMutex,
    103                                      &THREADING_TakeMutexBlocking,
    104                                      &THREADING_GiveMutex);
   \                     ??sl_mbedtls_init_0: (+1)
   \       0x14   0x....             LDR.N    R3,??DataTable3_2
   \       0x16   0x....             LDR.N    R2,??DataTable3_3
   \       0x18   0x....             LDR.N    R1,??DataTable3_4
   \       0x1A   0x....             LDR.N    R0,??DataTable3_5
   \       0x1C   0x.... 0x....      BL       mbedtls_threading_set_alt
    105            #if defined(MBEDTLS_PSA_CRYPTO_C)
    106            // Initialize mutex for PSA slot access in psa_crypto_slot_management.c
    107            if (!mbedtls_psa_slots_mutex_inited) {
   \       0x20   0x....             LDR.N    R5,??DataTable3_6
   \       0x22   0x7828             LDRB     R0,[R5, #+0]
   \       0x24   0x2800             CMP      R0,#+0
   \       0x26   0xD10E             BNE.N    ??sl_mbedtls_init_1
    108              int32_t kernel_lock_state = lock_task_switches();
   \       0x28   0x.... 0x....      BL       lock_task_switches
   \       0x2C   0x0006             MOVS     R6,R0
    109              if (!mbedtls_psa_slots_mutex_inited) {
   \       0x2E   0x7828             LDRB     R0,[R5, #+0]
   \       0x30   0x2800             CMP      R0,#+0
   \       0x32   0xD105             BNE.N    ??sl_mbedtls_init_2
    110                mbedtls_mutex_init(&mbedtls_psa_slots_mutex);
   \       0x34   0x....             LDR.N    R0,??DataTable3_7
   \       0x36   0x....             LDR.N    R1,??DataTable3_8
   \       0x38   0x6809             LDR      R1,[R1, #+0]
   \       0x3A   0x4788             BLX      R1
    111                mbedtls_psa_slots_mutex_inited = true;
   \       0x3C   0x2001             MOVS     R0,#+1
   \       0x3E   0x7028             STRB     R0,[R5, #+0]
    112              }
    113              restore_lock_state(kernel_lock_state);
   \                     ??sl_mbedtls_init_2: (+1)
   \       0x40   0x0030             MOVS     R0,R6
   \       0x42   0x.... 0x....      BL       restore_lock_state
    114            }
    115            #endif // #if defined(MBEDTLS_PSA_CRYPTO_C)
    116          #endif // #if defined(MBEDTLS_THREADING_ALT) && defined(MBEDTLS_THREADING_C)
    117          }
   \                     ??sl_mbedtls_init_1: (+1)
   \       0x46   0xBD70             POP      {R4-R6,PC}

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3:
   \        0x0   0x....'....        DC32     ?_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_1:
   \        0x0   0x....'....        DC32     ?_1

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_2:
   \        0x0   0x....'....        DC32     THREADING_GiveMutex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_3:
   \        0x0   0x....'....        DC32     THREADING_TakeMutexBlocking

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_4:
   \        0x0   0x....'....        DC32     THREADING_FreeMutex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_5:
   \        0x0   0x....'....        DC32     THREADING_InitMutex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_6:
   \        0x0   0x....'....        DC32     mbedtls_psa_slots_mutex_inited

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_7:
   \        0x0   0x....'....        DC32     mbedtls_psa_slots_mutex

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable3_8:
   \        0x0   0x....'....        DC32     mbedtls_mutex_init

   \                                 In section .rodata, align 4
   \                     ?_0:
   \        0x0   0x44 0x3A          DC8 0x44, 0x3A, 0x5C, 0x49, 0x6E, 0x65, 0x73, 0x68
   \              0x5C 0x49    
   \              0x6E 0x65    
   \              0x73 0x68
   \        0x8   0x5F 0x77          DC8 0x5F, 0x77, 0x69, 0x73, 0x75, 0x6E, 0x5C, 0x57
   \              0x69 0x73    
   \              0x75 0x6E    
   \              0x5C 0x57
   \       0x10   0x69 0x73          DC8 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F, 0x64
   \              0x75 0x6E    
   \              0x5F 0x4E    
   \              0x6F 0x64
   \       0x18   0x65 0x5F          DC8 0x65, 0x5F, 0x41, 0x70, 0x70, 0x20, 0x31, 0x5C
   \              0x41 0x70    
   \              0x70 0x20    
   \              0x31 0x5C
   \       0x20   0x57 0x69          DC8 0x57, 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F
   \              0x73 0x75    
   \              0x6E 0x5F    
   \              0x4E 0x6F
   \       0x28   0x64 0x65          DC8 0x64, 0x65, 0x5F, 0x41, 0x70, 0x70, 0x5C, 0x67
   \              0x5F 0x41    
   \              0x70 0x70    
   \              0x5C 0x67
   \       0x30   0x65 0x63          DC8 0x65, 0x63, 0x6B, 0x6F, 0x5F, 0x73, 0x64, 0x6B
   \              0x6B 0x6F    
   \              0x5F 0x73    
   \              0x64 0x6B
   \       0x38   0x5F 0x34          DC8 0x5F, 0x34, 0x2E, 0x34, 0x2E, 0x35, 0x5C, 0x70
   \              0x2E 0x34    
   \              0x2E 0x35    
   \              0x5C 0x70
   \       0x40   0x6C 0x61          DC8 0x6C, 0x61, 0x74, 0x66, 0x6F, 0x72, 0x6D, 0x5C
   \              0x74 0x66    
   \              0x6F 0x72    
   \              0x6D 0x5C
   \       0x48   0x73 0x65          DC8 0x73, 0x65, 0x63, 0x75, 0x72, 0x69, 0x74, 0x79
   \              0x63 0x75    
   \              0x72 0x69    
   \              0x74 0x79
   \       0x50   0x5C 0x73          DC8 0x5C, 0x73, 0x6C, 0x5F, 0x63, 0x6F, 0x6D, 0x70
   \              0x6C 0x5F    
   \              0x63 0x6F    
   \              0x6D 0x70
   \       0x58   0x6F 0x6E          DC8 0x6F, 0x6E, 0x65, 0x6E, 0x74, 0x5C, 0x73, 0x6C
   \              0x65 0x6E    
   \              0x74 0x5C    
   \              0x73 0x6C
   \       0x60   0x5F 0x6D          DC8 0x5F, 0x6D, 0x62, 0x65, 0x64, 0x74, 0x6C, 0x73
   \              0x62 0x65    
   \              0x64 0x74    
   \              0x6C 0x73
   \       0x68   0x5F 0x73          DC8 0x5F, 0x73, 0x75, 0x70, 0x70, 0x6F, 0x72, 0x74
   \              0x75 0x70    
   \              0x70 0x6F    
   \              0x72 0x74
   \       0x70   0x5C 0x69          DC8 0x5C, 0x69, 0x6E, 0x63, 0x5C, 0x74, 0x68, 0x72
   \              0x6E 0x63    
   \              0x5C 0x74    
   \              0x68 0x72
   \       0x78   0x65 0x61          DC8 0x65, 0x61, 0x64, 0x69, 0x6E, 0x67, 0x5F, 0x61
   \              0x64 0x69    
   \              0x6E 0x67    
   \              0x5F 0x61
   \       0x80   0x6C 0x74          DC8 0x6C, 0x74, 0x2E, 0x68, 0
   \              0x2E 0x68    
   \              0x00
   \       0x85                      DS8 3

   \                                 In section .rodata, align 4
   \                     ?_1:
   \        0x0   0x44 0x3A          DC8 0x44, 0x3A, 0x5C, 0x49, 0x6E, 0x65, 0x73, 0x68
   \              0x5C 0x49    
   \              0x6E 0x65    
   \              0x73 0x68
   \        0x8   0x5F 0x77          DC8 0x5F, 0x77, 0x69, 0x73, 0x75, 0x6E, 0x5C, 0x57
   \              0x69 0x73    
   \              0x75 0x6E    
   \              0x5C 0x57
   \       0x10   0x69 0x73          DC8 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F, 0x64
   \              0x75 0x6E    
   \              0x5F 0x4E    
   \              0x6F 0x64
   \       0x18   0x65 0x5F          DC8 0x65, 0x5F, 0x41, 0x70, 0x70, 0x20, 0x31, 0x5C
   \              0x41 0x70    
   \              0x70 0x20    
   \              0x31 0x5C
   \       0x20   0x57 0x69          DC8 0x57, 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F
   \              0x73 0x75    
   \              0x6E 0x5F    
   \              0x4E 0x6F
   \       0x28   0x64 0x65          DC8 0x64, 0x65, 0x5F, 0x41, 0x70, 0x70, 0x5C, 0x67
   \              0x5F 0x41    
   \              0x70 0x70    
   \              0x5C 0x67
   \       0x30   0x65 0x63          DC8 0x65, 0x63, 0x6B, 0x6F, 0x5F, 0x73, 0x64, 0x6B
   \              0x6B 0x6F    
   \              0x5F 0x73    
   \              0x64 0x6B
   \       0x38   0x5F 0x34          DC8 0x5F, 0x34, 0x2E, 0x34, 0x2E, 0x35, 0x5C, 0x70
   \              0x2E 0x34    
   \              0x2E 0x35    
   \              0x5C 0x70
   \       0x40   0x6C 0x61          DC8 0x6C, 0x61, 0x74, 0x66, 0x6F, 0x72, 0x6D, 0x5C
   \              0x74 0x66    
   \              0x6F 0x72    
   \              0x6D 0x5C
   \       0x48   0x73 0x65          DC8 0x73, 0x65, 0x63, 0x75, 0x72, 0x69, 0x74, 0x79
   \              0x63 0x75    
   \              0x72 0x69    
   \              0x74 0x79
   \       0x50   0x5C 0x73          DC8 0x5C, 0x73, 0x6C, 0x5F, 0x63, 0x6F, 0x6D, 0x70
   \              0x6C 0x5F    
   \              0x63 0x6F    
   \              0x6D 0x70
   \       0x58   0x6F 0x6E          DC8 0x6F, 0x6E, 0x65, 0x6E, 0x74, 0x5C, 0x73, 0x6C
   \              0x65 0x6E    
   \              0x74 0x5C    
   \              0x73 0x6C
   \       0x60   0x5F 0x6D          DC8 0x5F, 0x6D, 0x62, 0x65, 0x64, 0x74, 0x6C, 0x73
   \              0x62 0x65    
   \              0x64 0x74    
   \              0x6C 0x73
   \       0x68   0x5F 0x73          DC8 0x5F, 0x73, 0x75, 0x70, 0x70, 0x6F, 0x72, 0x74
   \              0x75 0x70    
   \              0x70 0x6F    
   \              0x72 0x74
   \       0x70   0x5C 0x73          DC8 0x5C, 0x73, 0x72, 0x63, 0x5C, 0x73, 0x6C, 0x5F
   \              0x72 0x63    
   \              0x5C 0x73    
   \              0x6C 0x5F
   \       0x78   0x6D 0x62          DC8 0x6D, 0x62, 0x65, 0x64, 0x74, 0x6C, 0x73, 0x2E
   \              0x65 0x64    
   \              0x74 0x6C    
   \              0x73 0x2E
   \       0x80   0x63 0x00          DC8 0x63, 0
   \       0x82                      DS8 2

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      16   THREADING_FreeMutex
        16   -> assertEFM
        16   -> osMutexDelete
      16   THREADING_GiveMutex
        16   -> osKernelGetState
        16   -> osMutexRelease
       8   THREADING_InitMutex
         8   -> assertEFM
         8   -> osMutexNew
      16   THREADING_TakeMutexBlocking
        16   -> osKernelGetState
        16   -> osMutexAcquire
      16   lock_task_switches
        16   -> osKernelGetState
        16   -> osKernelLock
      16   restore_lock_state
        16   -> assertEFM
        16   -> osKernelGetState
        16   -> osKernelRestoreLock
      16   sl_mbedtls_init
        16   -- Indirect call
        16   -> assertEFM
        16   -> lock_task_switches
        16   -> mbedtls_threading_set_alt
        16   -> restore_lock_state
        16   -> sl_se_init


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable3
       4  ??DataTable3_1
       4  ??DataTable3_2
       4  ??DataTable3_3
       4  ??DataTable3_4
       4  ??DataTable3_5
       4  ??DataTable3_6
       4  ??DataTable3_7
       4  ??DataTable3_8
     136  ?_0
     132  ?_1
      30  THREADING_FreeMutex
      46  THREADING_GiveMutex
      32  THREADING_InitMutex
      50  THREADING_TakeMutexBlocking
      28  lock_task_switches
       1  mbedtls_psa_slots_mutex_inited
      38  restore_lock_state
      72  sl_mbedtls_init

 
   1 byte  in section .bss
 268 bytes in section .rodata
 332 bytes in section .text
 
 332 bytes of CODE  memory
 268 bytes of CONST memory
   1 byte  of DATA  memory

Errors: none
Warnings: none
