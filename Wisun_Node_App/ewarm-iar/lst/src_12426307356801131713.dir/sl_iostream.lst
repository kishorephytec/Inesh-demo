###############################################################################
#
# IAR ANSI C/C++ Compiler V9.50.2.385/W64 for ARM         29/Mar/2025  15:53:36
# Copyright 1999-2024 IAR Systems AB.
#
#    Cpu mode          =  thumb
#    Endian            =  little
#    Source file       =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\src\sl_iostream.c
#    Command line      =
#        -f "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_12426307356801131713.dir\sl_iostream.o.rsp"
#        ("D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\src\sl_iostream.c"
#        -D DEBUG_EFM=1 -D EFR32FG28B322F1024IM48=1 -D
#        configNUM_SDK_THREAD_LOCAL_STORAGE_POINTERS=2 -D
#        SL_COMPONENT_CATALOG_PRESENT=1 -D
#        MBEDTLS_CONFIG_FILE=<sl_mbedtls_config.h> -D
#        MBEDTLS_PSA_CRYPTO_CONFIG_FILE=<psa_crypto_config.h> -D
#        SL_RAIL_LIB_MULTIPROTOCOL_SUPPORT=0 -D
#        SL_RAIL_UTIL_PA_CONFIG_HEADER=<sl_rail_util_pa_config.h> -D
#        RTT_USE_ASM=0 -lC "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\src_12426307356801131713.dir"
#        --diag_suppress Pa050 -o "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_12426307356801131713.dir" --no_cse
#        --no_unroll --no_inline --no_code_motion --no_tbaa --no_clustering
#        --no_scheduling --debug --endian=little --cpu=Cortex-M33 --cmse --cmse
#        -e --fpu=VFPv5_sp --dlib_config "C:\Program Files\IAR Systems\Embedded
#        Workbench 9.2\arm\inc\c\DLib_Config_Normal.h" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\src\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\rail\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\config\wisun\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\.\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\Device\SiliconLabs\EFR32FG28\Include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_project_info\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\cli\src\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\Core\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\CMSIS\RTOS2\Include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\device_init\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\common\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emlib\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\config\preset\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_mbedtls_support\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\mbedtls\library\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\common\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\cpu\include\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\ports\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\source\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\micrium_os\kernel\include\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\emdrv\nvm3\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\peripheral\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\printf\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\sl_psa_driver\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\common\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ble\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\ieee802154\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\wmbus\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\zwave\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\chip\efr32\efr32xg2x\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\protocol\sidewalk\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\pa-conversions\efr32xg28\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\radio\rail_lib\plugin\rail_util_pti\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\inc\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\security\sl_component\se_manager\src\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\third_party\segger\systemview\SEGGER\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\util\silicon_labs\silabs_core\memory_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\common\toolchain\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\system\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_core\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\app_setting\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\cli_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\event_manager\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ns_list\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\ping\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\trace_util\nanostack\nanostack-libservice\mbed-client-libservice\\"
#        -I "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\app\wisun\component\udp_client\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\sleeptimer\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\plugin\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\gecko_sdk_4.4.5\protocol\wisun\stack\inc\socket\\" -I
#        "D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\autogen\\" -On
#        --use_c++_inline) --dependencies=n "D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_12426307356801131713.dir\sl_iostream.o.iar_deps"
#    Locale            =  C
#    List file         =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\lst\src_12426307356801131713.dir\sl_iostream.lst
#    Object file       =
#        D:\Inesh_wisun\Wisun_Node_App
#        1\Wisun_Node_App\ewarm-iar\obj\src_12426307356801131713.dir\sl_iostream.o
#    Runtime model:       
#      __CPP_Runtime   =  1
#      __SystemLibrary =  DLib
#      __dlib_version  =  6
#
###############################################################################

D:\Inesh_wisun\Wisun_Node_App 1\Wisun_Node_App\gecko_sdk_4.4.5\platform\service\iostream\src\sl_iostream.c
      1          /***************************************************************************//**
      2           * @file
      3           * @brief IO Stream.
      4           *******************************************************************************
      5           * # License
      6           * <b>Copyright 2019 Silicon Laboratories Inc. www.silabs.com</b>
      7           *******************************************************************************
      8           *
      9           * SPDX-License-Identifier: Zlib
     10           *
     11           * The licensor of this software is Silicon Laboratories Inc.
     12           *
     13           * This software is provided 'as-is', without any express or implied
     14           * warranty. In no event will the authors be held liable for any damages
     15           * arising from the use of this software.
     16           *
     17           * Permission is granted to anyone to use this software for any purpose,
     18           * including commercial applications, and to alter it and redistribute it
     19           * freely, subject to the following restrictions:
     20           *
     21           * 1. The origin of this software must not be misrepresented; you must not
     22           *    claim that you wrote the original software. If you use this software
     23           *    in a product, an acknowledgment in the product documentation would be
     24           *    appreciated but is not required.
     25           * 2. Altered source versions must be plainly marked as such, and must not be
     26           *    misrepresented as being the original software.
     27           * 3. This notice may not be removed or altered from any source distribution.
     28           *
     29           ******************************************************************************/
     30          
     31          #include "sl_iostream.h"
     32          #include "sl_status.h"
     33          #include "em_core.h"
     34          
     35          #if defined(SL_CATALOG_KERNEL_PRESENT)
     36          #include "cmsis_os2.h"
     37          #include "sli_cmsis_os2_ext_task_register.h"
     38          #endif
     39          
     40          #if defined(SL_CATALOG_PRINTF_PRESENT)
     41          #include "printf.h"
     42          #else
     43          #include <stdio.h>
     44          #endif
     45          
     46          /*******************************************************************************
     47           *******************************   DEFINES   ***********************************
     48           ******************************************************************************/
     49          
     50          #if defined(SL_CATALOG_KERNEL_PRESENT)
     51          #define TASK_REGISTER_ID_INVALID   0xFF
     52          #endif
     53          
     54          /*******************************************************************************
     55           ***************************  LOCAL VARIABLES   ********************************
     56           ******************************************************************************/
     57          
     58          #if defined(SL_CATALOG_KERNEL_PRESENT)

   \                                 In section .data, align 1
     59          static sli_task_register_id_t sli_task_register_id = TASK_REGISTER_ID_INVALID;
   \                     sli_task_register_id:
   \        0x0   0xFF               DC8 255

   \                                 In section .bss, align 4
     60          static sl_iostream_t  *sli_iostream_system_default = NULL;
   \                     sli_iostream_system_default:
   \        0x0                      DS8 4
     61          #endif

   \                                 In section .bss, align 4
     62          static sl_iostream_t  *sli_iostream_default = NULL;
   \                     sli_iostream_default:
   \        0x0                      DS8 4
     63          

   \                                 In section .bss, align 4
     64          sl_iostream_t sl_iostream_null = {
   \                     sl_iostream_null:
   \        0x0                      DS8 12
     65            .write   = NULL,
     66            .read    = NULL,
     67            .context = NULL
     68          };
     69          
     70          /*******************************************************************************
     71           *********************   LOCAL FUNCTION PROTOTYPES   ***************************
     72           ******************************************************************************/
     73          
     74          #if defined(SL_CATALOG_PRINTF_PRESENT)
     75          static void stream_putchar(char character,
     76                                     void *arg);
     77          #endif
     78          
     79          /*******************************************************************************
     80           **************************   GLOBAL FUNCTIONS   *******************************
     81           ******************************************************************************/
     82          
     83          /***************************************************************************//**
     84           * Registers default IO stream to be used
     85           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
     86          sl_status_t sl_iostream_set_default(sl_iostream_t  *stream)
     87          {
   \                     sl_iostream_set_default: (+1)
   \        0x0   0xB5F8             PUSH     {R3-R7,LR}
   \        0x2   0x0005             MOVS     R5,R0
     88          #if defined(SL_CATALOG_KERNEL_PRESENT)
     89            sli_task_register_id_t reg_id;
     90            sl_status_t status;
     91          #endif
     92            CORE_DECLARE_IRQ_STATE;
     93          
     94            CORE_ENTER_CRITICAL();
   \        0x4   0x.... 0x....      BL       CORE_EnterCritical
   \        0x8   0x0006             MOVS     R6,R0
     95          #if defined(SL_CATALOG_KERNEL_PRESENT)
     96            if (osThreadGetId() != NULL) {
   \        0xA   0x.... 0x....      BL       osThreadGetId
   \        0xE   0x2800             CMP      R0,#+0
   \       0x10   0xD014             BEQ.N    ??sl_iostream_set_default_0
     97              reg_id = sli_task_register_id;
   \       0x12   0x....             LDR.N    R7,??DataTable2
   \       0x14   0x7838             LDRB     R0,[R7, #+0]
   \       0x16   0xF88D 0x0000      STRB     R0,[SP, #+0]
     98              if (reg_id == TASK_REGISTER_ID_INVALID) {
   \       0x1A   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \       0x1E   0x28FF             CMP      R0,#+255
   \       0x20   0xD10C             BNE.N    ??sl_iostream_set_default_0
     99                status = sli_osTaskRegisterNew(&reg_id);
   \       0x22   0x4668             MOV      R0,SP
   \       0x24   0x.... 0x....      BL       sli_osTaskRegisterNew
   \       0x28   0x0004             MOVS     R4,R0
    100                EFM_ASSERT(status == SL_STATUS_OK);
   \       0x2A   0x2C00             CMP      R4,#+0
   \       0x2C   0xD003             BEQ.N    ??sl_iostream_set_default_1
   \       0x2E   0x2164             MOVS     R1,#+100
   \       0x30   0x....             LDR.N    R0,??DataTable2_1
   \       0x32   0x.... 0x....      BL       assertEFM
    101                sli_task_register_id = reg_id;
   \                     ??sl_iostream_set_default_1: (+1)
   \       0x36   0xF89D 0x0000      LDRB     R0,[SP, #+0]
   \       0x3A   0x7038             STRB     R0,[R7, #+0]
    102              }
    103            }
    104          #endif
    105            sli_iostream_default = stream;
   \                     ??sl_iostream_set_default_0: (+1)
   \       0x3C   0x....             LDR.N    R0,??DataTable2_2
   \       0x3E   0x6005             STR      R5,[R0, #+0]
    106            CORE_EXIT_CRITICAL();
   \       0x40   0x0030             MOVS     R0,R6
   \       0x42   0x.... 0x....      BL       CORE_ExitCritical
    107          
    108          #if defined(SL_CATALOG_KERNEL_PRESENT)
    109            if (osThreadGetId() != NULL) {
   \       0x46   0x.... 0x....      BL       osThreadGetId
   \       0x4A   0x2800             CMP      R0,#+0
   \       0x4C   0xD00C             BEQ.N    ??sl_iostream_set_default_2
    110              status = sli_osTaskRegisterSetValue(NULL, reg_id, (uint32_t)stream);
   \       0x4E   0x002A             MOVS     R2,R5
   \       0x50   0xF89D 0x1000      LDRB     R1,[SP, #+0]
   \       0x54   0x2000             MOVS     R0,#+0
   \       0x56   0x.... 0x....      BL       sli_osTaskRegisterSetValue
   \       0x5A   0x0004             MOVS     R4,R0
    111              EFM_ASSERT(status == SL_STATUS_OK);
   \       0x5C   0x2C00             CMP      R4,#+0
   \       0x5E   0xD003             BEQ.N    ??sl_iostream_set_default_2
   \       0x60   0x216F             MOVS     R1,#+111
   \       0x62   0x....             LDR.N    R0,??DataTable2_1
   \       0x64   0x.... 0x....      BL       assertEFM
    112            }
    113          #endif
    114          
    115            return SL_STATUS_OK;
   \                     ??sl_iostream_set_default_2: (+1)
   \       0x68   0x2000             MOVS     R0,#+0
   \       0x6A   0xBDF2             POP      {R1,R4-R7,PC}
    116          }
    117          
    118          /***************************************************************************//**
    119           * Get default IO stream configured
    120           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    121          sl_iostream_t *sl_iostream_get_default(void)
    122          {
   \                     sl_iostream_get_default: (+1)
   \        0x0   0xE92D 0x43F8      PUSH     {R3-R9,LR}
    123          #if defined(SL_CATALOG_KERNEL_PRESENT)
    124            sl_status_t status;
    125            sli_task_register_id_t reg_id;
    126          #endif
    127            sl_iostream_t *stream = NULL;
   \        0x4   0xF05F 0x0900      MOVS     R9,#+0
    128            CORE_DECLARE_IRQ_STATE;
    129          
    130            CORE_ENTER_CRITICAL();
   \        0x8   0x.... 0x....      BL       CORE_EnterCritical
   \        0xC   0x0006             MOVS     R6,R0
    131          #if defined(SL_CATALOG_KERNEL_PRESENT)
    132            reg_id = sli_task_register_id;
   \        0xE   0x....             LDR.N    R7,??DataTable2
   \       0x10   0xF897 0x8000      LDRB     R8,[R7, #+0]
    133          #endif
    134            stream = sli_iostream_default;
   \       0x14   0x....             LDR.N    R0,??DataTable2_2
   \       0x16   0x6805             LDR      R5,[R0, #+0]
    135            CORE_EXIT_CRITICAL();
   \       0x18   0x0030             MOVS     R0,R6
   \       0x1A   0x.... 0x....      BL       CORE_ExitCritical
    136          
    137          #if defined(SL_CATALOG_KERNEL_PRESENT)
    138            if (osThreadGetId() != NULL) {
   \       0x1E   0x.... 0x....      BL       osThreadGetId
   \       0x22   0x2800             CMP      R0,#+0
   \       0x24   0xD011             BEQ.N    ??sl_iostream_get_default_0
    139              if (reg_id != TASK_REGISTER_ID_INVALID) {
   \       0x26   0x4640             MOV      R0,R8
   \       0x28   0xB2C0             UXTB     R0,R0
   \       0x2A   0x28FF             CMP      R0,#+255
   \       0x2C   0xD00D             BEQ.N    ??sl_iostream_get_default_0
    140                uint32_t reg;
    141          
    142                status = sli_osTaskRegisterGetValue(NULL, sli_task_register_id, &reg);
   \       0x2E   0x466A             MOV      R2,SP
   \       0x30   0x7839             LDRB     R1,[R7, #+0]
   \       0x32   0x2000             MOVS     R0,#+0
   \       0x34   0x.... 0x....      BL       sli_osTaskRegisterGetValue
   \       0x38   0x0004             MOVS     R4,R0
    143                EFM_ASSERT(status == SL_STATUS_OK);
   \       0x3A   0x2C00             CMP      R4,#+0
   \       0x3C   0xD003             BEQ.N    ??sl_iostream_get_default_1
   \       0x3E   0x218F             MOVS     R1,#+143
   \       0x40   0x....             LDR.N    R0,??DataTable2_1
   \       0x42   0x.... 0x....      BL       assertEFM
    144          
    145                stream = (sl_iostream_t *)reg;
   \                     ??sl_iostream_get_default_1: (+1)
   \       0x46   0x9800             LDR      R0,[SP, #+0]
   \       0x48   0x0005             MOVS     R5,R0
    146              }
    147            }
    148            if (stream == NULL) {
   \                     ??sl_iostream_get_default_0: (+1)
   \       0x4A   0x2D00             CMP      R5,#+0
   \       0x4C   0xD108             BNE.N    ??sl_iostream_get_default_2
    149              CORE_ENTER_CRITICAL();
   \       0x4E   0x.... 0x....      BL       CORE_EnterCritical
   \       0x52   0x0006             MOVS     R6,R0
    150              stream = sli_iostream_system_default;
   \       0x54   0x....             LDR.N    R0,??DataTable2_3
   \       0x56   0x6800             LDR      R0,[R0, #+0]
   \       0x58   0x0005             MOVS     R5,R0
    151              CORE_EXIT_CRITICAL();
   \       0x5A   0x0030             MOVS     R0,R6
   \       0x5C   0x.... 0x....      BL       CORE_ExitCritical
    152            }
    153          #endif
    154          
    155            return stream;
   \                     ??sl_iostream_get_default_2: (+1)
   \       0x60   0x0028             MOVS     R0,R5
   \       0x62   0xE8BD 0x83F2      POP      {R1,R4-R9,PC}
    156          }
    157          
    158          /***************************************************************************//**
    159           * Set systemwide default IO stream
    160           ******************************************************************************/
    161          #if defined(SL_CATALOG_KERNEL_PRESENT)

   \                                 In section .text, align 2, keep-with-next
    162          sl_status_t sl_iostream_set_system_default(sl_iostream_t *stream)
    163          {
   \                     sl_iostream_set_system_default: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
   \        0x2   0x0004             MOVS     R4,R0
    164            sl_status_t status = SL_STATUS_OK;
   \        0x4   0x2500             MOVS     R5,#+0
    165            CORE_DECLARE_IRQ_STATE;
    166          
    167            CORE_ENTER_CRITICAL();
   \        0x6   0x.... 0x....      BL       CORE_EnterCritical
   \        0xA   0x0006             MOVS     R6,R0
    168            sli_iostream_system_default = stream;
   \        0xC   0x....             LDR.N    R0,??DataTable2_3
   \        0xE   0x6004             STR      R4,[R0, #+0]
    169            CORE_EXIT_CRITICAL();
   \       0x10   0x0030             MOVS     R0,R6
   \       0x12   0x.... 0x....      BL       CORE_ExitCritical
    170            return status;
   \       0x16   0x0028             MOVS     R0,R5
   \       0x18   0xBD70             POP      {R4-R6,PC}
    171          }
    172          #endif
    173          
    174          /***************************************************************************//**
    175           * Stream write implementation
    176           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    177          sl_status_t  sl_iostream_write(sl_iostream_t *stream,
    178                                         const void *buffer,
    179                                         size_t buffer_length)
    180          {
   \                     sl_iostream_write: (+1)
   \        0x0   0xB570             PUSH     {R4-R6,LR}
   \        0x2   0x0004             MOVS     R4,R0
   \        0x4   0x000D             MOVS     R5,R1
   \        0x6   0x0016             MOVS     R6,R2
    181            if (stream == SL_IOSTREAM_STDOUT) {
   \        0x8   0x2C00             CMP      R4,#+0
   \        0xA   0xD102             BNE.N    ??sl_iostream_write_0
    182              stream = sl_iostream_get_default();
   \        0xC   0x.... 0x....      BL       sl_iostream_get_default
   \       0x10   0x0004             MOVS     R4,R0
    183            }
    184          
    185            if ((stream != NULL) && (stream->write != NULL)) {
   \                     ??sl_iostream_write_0: (+1)
   \       0x12   0x2C00             CMP      R4,#+0
   \       0x14   0xD008             BEQ.N    ??sl_iostream_write_1
   \       0x16   0x6860             LDR      R0,[R4, #+4]
   \       0x18   0x2800             CMP      R0,#+0
   \       0x1A   0xD005             BEQ.N    ??sl_iostream_write_1
    186              return stream->write(stream->context, buffer, buffer_length);
   \       0x1C   0x0032             MOVS     R2,R6
   \       0x1E   0x0029             MOVS     R1,R5
   \       0x20   0x6820             LDR      R0,[R4, #+0]
   \       0x22   0x6863             LDR      R3,[R4, #+4]
   \       0x24   0x4798             BLX      R3
   \       0x26   0xE000             B.N      ??sl_iostream_write_2
    187            } else {
    188              return SL_STATUS_INVALID_CONFIGURATION;
   \                     ??sl_iostream_write_1: (+1)
   \       0x28   0x2023             MOVS     R0,#+35
   \                     ??sl_iostream_write_2: (+1)
   \       0x2A   0xBD70             POP      {R4-R6,PC}
    189            }
    190          }
    191          
    192          /***************************************************************************//**
    193           * Stream read implementation
    194           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    195          sl_status_t sl_iostream_read(sl_iostream_t *stream,
    196                                       void *buffer,
    197                                       size_t buffer_length,
    198                                       size_t *bytes_read)
    199          {
   \                     sl_iostream_read: (+1)
   \        0x0   0xE92D 0x41FC      PUSH     {R2-R8,LR}
   \        0x4   0x0004             MOVS     R4,R0
   \        0x6   0x000E             MOVS     R6,R1
   \        0x8   0x0017             MOVS     R7,R2
   \        0xA   0x001D             MOVS     R5,R3
    200            size_t   size;
    201            size_t  *read_size = &size;
   \        0xC   0x46E8             MOV      R8,SP
    202          
    203            if (stream == SL_IOSTREAM_STDIN) {
   \        0xE   0x2C00             CMP      R4,#+0
   \       0x10   0xD102             BNE.N    ??sl_iostream_read_0
    204              stream = sl_iostream_get_default();
   \       0x12   0x.... 0x....      BL       sl_iostream_get_default
   \       0x16   0x0004             MOVS     R4,R0
    205            }
    206          
    207            if (bytes_read != NULL) {
   \                     ??sl_iostream_read_0: (+1)
   \       0x18   0x2D00             CMP      R5,#+0
   \       0x1A   0xD000             BEQ.N    ??sl_iostream_read_1
    208              read_size = bytes_read;
   \       0x1C   0x46A8             MOV      R8,R5
    209            }
    210          
    211            if ((stream != NULL) && (stream->read != NULL)) {
   \                     ??sl_iostream_read_1: (+1)
   \       0x1E   0x2C00             CMP      R4,#+0
   \       0x20   0xD00A             BEQ.N    ??sl_iostream_read_2
   \       0x22   0x68A0             LDR      R0,[R4, #+8]
   \       0x24   0x2800             CMP      R0,#+0
   \       0x26   0xD007             BEQ.N    ??sl_iostream_read_2
    212              return stream->read(stream->context, buffer, buffer_length, read_size);
   \       0x28   0x4643             MOV      R3,R8
   \       0x2A   0x003A             MOVS     R2,R7
   \       0x2C   0x0031             MOVS     R1,R6
   \       0x2E   0x6820             LDR      R0,[R4, #+0]
   \       0x30   0xF8D4 0xC008      LDR      R12,[R4, #+8]
   \       0x34   0x47E0             BLX      R12
   \       0x36   0xE000             B.N      ??sl_iostream_read_3
    213            } else {
    214              return SL_STATUS_INVALID_CONFIGURATION;
   \                     ??sl_iostream_read_2: (+1)
   \       0x38   0x2023             MOVS     R0,#+35
   \                     ??sl_iostream_read_3: (+1)
   \       0x3A   0xE8BD 0x81F6      POP      {R1,R2,R4-R8,PC}
    215            }
    216          }
    217          
    218          /***************************************************************************//**
    219           * Stream putchar implementation
    220           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    221          sl_status_t sl_iostream_putchar(sl_iostream_t *stream,
    222                                          char c)
    223          {
   \                     sl_iostream_putchar: (+1)
   \        0x0   0xB513             PUSH     {R0,R1,R4,LR}
   \        0x2   0x0004             MOVS     R4,R0
    224            return sl_iostream_write(stream, &c, 1);
   \        0x4   0x2201             MOVS     R2,#+1
   \        0x6   0xA901             ADD      R1,SP,#+4
   \        0x8   0x0020             MOVS     R0,R4
   \        0xA   0x.... 0x....      BL       sl_iostream_write
   \        0xE   0xBD16             POP      {R1,R2,R4,PC}
    225          }
    226          
    227          /***************************************************************************//**
    228           * Stream getchar implementation
    229           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    230          sl_status_t sl_iostream_getchar(sl_iostream_t *stream,
    231                                          char *c)
    232          {
   \                     sl_iostream_getchar: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
   \        0x4   0x000C             MOVS     R4,R1
    233            return sl_iostream_read(stream, c, 1, NULL);
   \        0x6   0x2300             MOVS     R3,#+0
   \        0x8   0x2201             MOVS     R2,#+1
   \        0xA   0x0021             MOVS     R1,R4
   \        0xC   0x0028             MOVS     R0,R5
   \        0xE   0x.... 0x....      BL       sl_iostream_read
   \       0x12   0xBD32             POP      {R1,R4,R5,PC}
    234          }
    235          
    236          /***************************************************************************//**
    237           * Stream vprintf implementation
    238           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    239          sl_status_t sl_iostream_vprintf(sl_iostream_t *stream,
    240                                          const char *format,
    241                                          va_list argp)
    242          {
   \                     sl_iostream_vprintf: (+1)
   \        0x0   0xE92D 0x41F0      PUSH     {R4-R8,LR}
   \        0x4   0x0005             MOVS     R5,R0
   \        0x6   0x000E             MOVS     R6,R1
   \        0x8   0x0017             MOVS     R7,R2
    243          #if !defined(SL_CATALOG_PRINTF_PRESENT)
    244            sl_iostream_t *default_stream;
    245          #endif
    246            sl_iostream_t *output_stream = stream;
   \        0xA   0x002C             MOVS     R4,R5
    247            sl_status_t status = SL_STATUS_OK;
   \        0xC   0xF05F 0x0800      MOVS     R8,#+0
    248            int ret;
    249          
    250          #if defined(SL_CATALOG_PRINTF_PRESENT)
    251            if (output_stream == SL_IOSTREAM_STDOUT) {
   \       0x10   0x2C00             CMP      R4,#+0
   \       0x12   0xD102             BNE.N    ??sl_iostream_vprintf_0
    252              output_stream = sl_iostream_get_default();
   \       0x14   0x.... 0x....      BL       sl_iostream_get_default
   \       0x18   0x0004             MOVS     R4,R0
    253            }
    254            ret = vfctprintf(stream_putchar, output_stream, format, argp);
   \                     ??sl_iostream_vprintf_0: (+1)
   \       0x1A   0x003B             MOVS     R3,R7
   \       0x1C   0x0032             MOVS     R2,R6
   \       0x1E   0x0021             MOVS     R1,R4
   \       0x20   0x.... 0x....      ADR.W    R0,stream_putchar
   \       0x24   0x.... 0x....      BL       vfctprintf
   \       0x28   0x0001             MOVS     R1,R0
    255          #else
    256            if (output_stream == SL_IOSTREAM_STDOUT) {
    257              default_stream = sl_iostream_get_default();
    258              output_stream = default_stream;
    259            } else {
    260              default_stream = sl_iostream_get_default();
    261              if (default_stream != output_stream) {
    262                sl_iostream_set_default(output_stream);
    263              }
    264            }
    265          
    266            ret = vprintf(format, argp);
    267            if (default_stream != output_stream) {
    268              sl_iostream_set_default(default_stream);
    269            }
    270          #endif
    271            if (ret <= 0) {
   \       0x2A   0x2901             CMP      R1,#+1
   \       0x2C   0xDA01             BGE.N    ??sl_iostream_vprintf_1
    272              status = SL_STATUS_OBJECT_WRITE;
   \       0x2E   0x2037             MOVS     R0,#+55
   \       0x30   0x4680             MOV      R8,R0
    273            }
    274          
    275            return status;
   \                     ??sl_iostream_vprintf_1: (+1)
   \       0x32   0x4640             MOV      R0,R8
   \       0x34   0xE8BD 0x81F0      POP      {R4-R8,PC}
    276          }
    277          
    278          /***************************************************************************//**
    279           * Stream printf implementation
    280           ******************************************************************************/

   \                                 In section .text, align 2, keep-with-next
    281          sl_status_t sl_iostream_printf(sl_iostream_t *stream,
    282                                         const char *format,
    283                                         ...)
    284          {
   \                     sl_iostream_printf: (+1)
   \        0x0   0xB40C             PUSH     {R2,R3}
   \        0x2   0xB570             PUSH     {R4-R6,LR}
   \        0x4   0x0006             MOVS     R6,R0
   \        0x6   0x000C             MOVS     R4,R1
    285            sl_status_t status;
    286            va_list argp;
    287            va_start(argp, format);
   \        0x8   0xAD04             ADD      R5,SP,#+16
    288            status = sl_iostream_vprintf(stream, format, argp);
   \        0xA   0x002A             MOVS     R2,R5
   \        0xC   0x0021             MOVS     R1,R4
   \        0xE   0x0030             MOVS     R0,R6
   \       0x10   0x.... 0x....      BL       sl_iostream_vprintf
    289            va_end(argp);
    290            return status;
   \       0x14   0xBC70             POP      {R4-R6}
   \       0x16   0xF85D 0xFB0C      LDR      PC,[SP], #+12
    291          }
    292          
    293          /***************************************************************************//**
    294           * putchar implementation for sl_iostream_printf; called by fnctprintf()
    295           ******************************************************************************/
    296          #if defined(SL_CATALOG_PRINTF_PRESENT)

   \                                 In section .text, align 4, keep-with-next
    297          static void stream_putchar(char character,
    298                                     void *arg)
    299          {
   \                     stream_putchar: (+1)
   \        0x0   0xB538             PUSH     {R3-R5,LR}
   \        0x2   0x0005             MOVS     R5,R0
   \        0x4   0x000C             MOVS     R4,R1
    300            sl_iostream_putchar((sl_iostream_t *)arg, character);
   \        0x6   0x0029             MOVS     R1,R5
   \        0x8   0xB2C9             UXTB     R1,R1
   \        0xA   0x0020             MOVS     R0,R4
   \        0xC   0x.... 0x....      BL       sl_iostream_putchar
    301          }
   \       0x10   0xBD31             POP      {R0,R4,R5,PC}

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2:
   \        0x0   0x....'....        DC32     sli_task_register_id

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_1:
   \        0x0   0x....'....        DC32     ?_0

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_2:
   \        0x0   0x....'....        DC32     sli_iostream_default

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable2_3:
   \        0x0   0x....'....        DC32     sli_iostream_system_default

   \                                 In section .rodata, align 4
   \                     ?_0:
   \        0x0   0x44 0x3A          DC8 0x44, 0x3A, 0x5C, 0x49, 0x6E, 0x65, 0x73, 0x68
   \              0x5C 0x49    
   \              0x6E 0x65    
   \              0x73 0x68
   \        0x8   0x5F 0x77          DC8 0x5F, 0x77, 0x69, 0x73, 0x75, 0x6E, 0x5C, 0x57
   \              0x69 0x73    
   \              0x75 0x6E    
   \              0x5C 0x57
   \       0x10   0x69 0x73          DC8 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F, 0x64
   \              0x75 0x6E    
   \              0x5F 0x4E    
   \              0x6F 0x64
   \       0x18   0x65 0x5F          DC8 0x65, 0x5F, 0x41, 0x70, 0x70, 0x20, 0x31, 0x5C
   \              0x41 0x70    
   \              0x70 0x20    
   \              0x31 0x5C
   \       0x20   0x57 0x69          DC8 0x57, 0x69, 0x73, 0x75, 0x6E, 0x5F, 0x4E, 0x6F
   \              0x73 0x75    
   \              0x6E 0x5F    
   \              0x4E 0x6F
   \       0x28   0x64 0x65          DC8 0x64, 0x65, 0x5F, 0x41, 0x70, 0x70, 0x5C, 0x67
   \              0x5F 0x41    
   \              0x70 0x70    
   \              0x5C 0x67
   \       0x30   0x65 0x63          DC8 0x65, 0x63, 0x6B, 0x6F, 0x5F, 0x73, 0x64, 0x6B
   \              0x6B 0x6F    
   \              0x5F 0x73    
   \              0x64 0x6B
   \       0x38   0x5F 0x34          DC8 0x5F, 0x34, 0x2E, 0x34, 0x2E, 0x35, 0x5C, 0x70
   \              0x2E 0x34    
   \              0x2E 0x35    
   \              0x5C 0x70
   \       0x40   0x6C 0x61          DC8 0x6C, 0x61, 0x74, 0x66, 0x6F, 0x72, 0x6D, 0x5C
   \              0x74 0x66    
   \              0x6F 0x72    
   \              0x6D 0x5C
   \       0x48   0x73 0x65          DC8 0x73, 0x65, 0x72, 0x76, 0x69, 0x63, 0x65, 0x5C
   \              0x72 0x76    
   \              0x69 0x63    
   \              0x65 0x5C
   \       0x50   0x69 0x6F          DC8 0x69, 0x6F, 0x73, 0x74, 0x72, 0x65, 0x61, 0x6D
   \              0x73 0x74    
   \              0x72 0x65    
   \              0x61 0x6D
   \       0x58   0x5C 0x73          DC8 0x5C, 0x73, 0x72, 0x63, 0x5C, 0x73, 0x6C, 0x5F
   \              0x72 0x63    
   \              0x5C 0x73    
   \              0x6C 0x5F
   \       0x60   0x69 0x6F          DC8 0x69, 0x6F, 0x73, 0x74, 0x72, 0x65, 0x61, 0x6D
   \              0x73 0x74    
   \              0x72 0x65    
   \              0x61 0x6D
   \       0x68   0x2E 0x63          DC8 0x2E, 0x63, 0
   \              0x00
   \       0x6B                      DS8 1
    302          #endif

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
      32   sl_iostream_get_default
        32   -> CORE_EnterCritical
        32   -> CORE_ExitCritical
        32   -> assertEFM
        32   -> osThreadGetId
        32   -> sli_osTaskRegisterGetValue
      16   sl_iostream_getchar
        16   -> sl_iostream_read
      24   sl_iostream_printf
        24   -> sl_iostream_vprintf
      16   sl_iostream_putchar
        16   -> sl_iostream_write
      32   sl_iostream_read
        32   -- Indirect call
        32   -> sl_iostream_get_default
      24   sl_iostream_set_default
        24   -> CORE_EnterCritical
        24   -> CORE_ExitCritical
        24   -> assertEFM
        24   -> osThreadGetId
        24   -> sli_osTaskRegisterNew
        24   -> sli_osTaskRegisterSetValue
      16   sl_iostream_set_system_default
        16   -> CORE_EnterCritical
        16   -> CORE_ExitCritical
      24   sl_iostream_vprintf
        24   -> sl_iostream_get_default
        24   -> vfctprintf
      16   sl_iostream_write
        16   -- Indirect call
        16   -> sl_iostream_get_default
      16   stream_putchar
        16   -> sl_iostream_putchar


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable2
       4  ??DataTable2_1
       4  ??DataTable2_2
       4  ??DataTable2_3
     108  ?_0
     102  sl_iostream_get_default
      20  sl_iostream_getchar
      12  sl_iostream_null
      26  sl_iostream_printf
      16  sl_iostream_putchar
      62  sl_iostream_read
     108  sl_iostream_set_default
      26  sl_iostream_set_system_default
      56  sl_iostream_vprintf
      44  sl_iostream_write
       4  sli_iostream_default
       4  sli_iostream_system_default
       1  sli_task_register_id
      18  stream_putchar

 
  20 bytes in section .bss
   1 byte  in section .data
 108 bytes in section .rodata
 494 bytes in section .text
 
 494 bytes of CODE  memory
 108 bytes of CONST memory
  21 bytes of DATA  memory

Errors: none
Warnings: none
